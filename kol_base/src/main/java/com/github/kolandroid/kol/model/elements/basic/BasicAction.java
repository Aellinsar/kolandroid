package com.github.kolandroid.kol.model.elements.basic;

import com.github.kolandroid.kol.connection.Session;
import com.github.kolandroid.kol.gamehandler.ViewContext;
import com.github.kolandroid.kol.model.elements.interfaces.DeferredGameAction;
import com.github.kolandroid.kol.request.Request;

public class BasicAction implements DeferredGameAction {
    /**
     * Autogenerated by eclipse.
     */
    private static final long serialVersionUID = 7965783002773029040L;

    private final String url;
    private final Session session;

    public BasicAction(Session session, String url) {
        this.url = url;
        this.session = session;
    }

    protected void submit(ViewContext context, Session sessionOverride, String urlOverride) {
        Request r = new Request(urlOverride);
        r.makeAsync(sessionOverride, context.createLoadingContext(), context.getPrimaryRoute());
    }

    protected void submit(ViewContext context, String urlOverride) {
        submit(context, session, urlOverride);
    }

    @Override
    public void submit(ViewContext context) {
        submit(context, session, url);
    }

    public boolean urlMatches(BasicAction other) {
        if (other == null) return false;
        return url.equals(other.url);
    }
}
